require_relative "dependencies"
require "selenium/webdriver"

FigNewton.load("staging.yml")

mobile_emulation = { "deviceName" => "Pixel 2"}

Capybara.register_driver :pixel2 do |app|
  caps = Selenium::WebDriver::Remote::Capabilities.chrome("chromeOptions" => { "mobileEmulation" => mobile_emulation })

  Capybara::Selenium::Driver.new(app, {
    :browser => :chrome,
    :desired_capabilities => caps})
end

Capybara.default_max_wait_time = 100

# Actions performed before/after each scenario
Before do
  Capybara.default_driver = :pixel2
end

After do
  sign_out_of_idme
end

# Include helper methods module in each 'World' instance
World(HelperMethods)
